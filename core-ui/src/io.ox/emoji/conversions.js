/*
 *
 * @copyright Copyright (c) OX Software GmbH, Germany <info@open-xchange.com>
 * @license AGPL-3.0
 *
 * This code is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with OX App Suite. If not, see <https://www.gnu.org/licenses/agpl-3.0.txt>.
 *
 * Any use of the work other than as authorized under this license or copyright law is prohibited.
 *
 */

const JIS_MAP = {
  ﯗ: '\u2122',
  '\uf7ef': '\u00ae',
  '\uf7ee': '\u00a9',
  '\uf7b1': '\u27bf',
  '\uf7f1': '\ud83d\udcf4',
  '\uf7f0': '\ud83d\udcf3',
  '\uf7ab': '\ud83d\udcf6',
  '\uf7bb': '\ud83d\udd33',
  '\uf7ba': '\ud83d\udd32',
  '\uf7a6': '\u2733',
  '\uf7a5': '\u2734',
  '\uf7a4': '\ud83d\udc9f',
  '\uf7b9': '\ud83d\udd34',
  '\uf76c': '\u303d',
  辰: '\ud83d\udd31',
  '\uf7a7': '\ud83d\udd1e',
  例: '\u3299',
  玲: '\u3297',
  '\uf7b8': '\ud83c\ude38',
  '\uf7b7': '\ud83c\ude37',
  '\uf7b6': '\ud83c\ude1a',
  '\uf7b5': '\ud83c\ude36',
  '\uf7c9': '\ud83c\udd94',
  '\uf7cd': '\ud83c\ude3a',
  '\uf7cc': '\ud83c\ude2f',
  '\uf7c8': '\ud83c\ude02',
  '\uf7c7': '\ud83c\ude39',
  '\uf7c6': '\ud83c\ude50',
  '\uf7cb': '\ud83c\ude33',
  '\uf7ca': '\ud83c\ude35',
  '\uf76e': '\ud83c\udd9a',
  '\uf7a3': '\ud83c\ude01',
  '\uf7b4': '\ud83c\udd92',
  '\uf7b3': '\ud83c\udd99',
  '\uf7b2': '\ud83c\udd95',
  '\uf7ec': '\ud83d\udd1d',
  '\uf7ed': '\ud83c\udd97',
  '\uf773': '\ud83c\udfb0',
  '\uf78a': '\ud83d\udcb1',
  '\uf78b': '\ud83d\udcb9',
  ﯕ: '\ud83c\udd7e',
  ﯔ: '\ud83c\udd8e',
  ﯓ: '\ud83c\udd71',
  '\ufbd2': '\ud83c\udd70',
  '\uf7eb': '\u26ce',
  '\uf7ea': '\u2653',
  '\uf7e9': '\u2652',
  '\uf7e8': '\u2651',
  '\uf7e7': '\u2650',
  '\uf7e6': '\u264f',
  '\uf7e5': '\u264e',
  '\uf7e4': '\u264d',
  '\uf7e3': '\u264c',
  '\uf7e2': '\u264b',
  '\uf7e1': '\u264a',
  '\uf7e0': '\u2649',
  '\uf7df': '\u2648',
  '\uf7de': '\ud83d\udd2f',
  '\uf7b0': '#\u20e3',
  '\uf7c5': '0\u20e3',
  '\uf7c4': '9\u20e3',
  '\uf7c3': '8\u20e3',
  '\uf7c2': '7\u20e3',
  '\uf7c1': '6\u20e3',
  '\uf7c0': '5\u20e3',
  '\uf7bf': '4\u20e3',
  '\uf7be': '3\u20e3',
  '\uf7bd': '2\u20e3',
  '\uf7bc': '1\u20e3',
  '\uf7d1': '\ud83d\udc49',
  '\uf7d0': '\ud83d\udc48',
  '\uf7cf': '\ud83d\udc47',
  '\uf7ce': '\ud83d\udc46',
  '\uf7dd': '\u23ea',
  '\uf7dc': '\u23e9',
  '\uf7db': '\u25c0',
  '\uf7da': '\u25b6',
  '\uf7d5': '\u2b05',
  '\uf7d4': '\u27a1',
  '\uf7d3': '\u2b07',
  '\uf7d2': '\u2b06',
  '\uf7d9': '\u2199',
  '\uf7d8': '\u2198',
  '\uf7d7': '\u2196',
  '\uf7d6': '\u2197',
  '\uf7af': '\u2663',
  '\uf7ae': '\u2660',
  '\uf7ad': '\u2666',
  '\uf7ac': '\u2665',
  陸: '\u274c',
  戮: '\u2b55',
  '\uf780': '\ud83d\udec0',
  料: '\ud83d\udc86',
  尿: '\ud83d\udc85',
  樂: '\ud83d\udc87',
  燎: '\ud83d\udc88',
  ﮢ: '\ud83c\udfa8',
  '\uf765': '\ud83c\udfab',
  龍: '\ud83c\udfac',
  諒: '\ud83c\udfa5',
  女: '\ud83c\udfb7',
  旅: '\ud83c\udfba',
  廬: '\ud83c\udfb8',
  禮: '\ud83d\udcbd',
  '\uf769': '\ud83d\udcfc',
  '\uf767': '\ud83d\udcc0',
  '\uf766': '\ud83d\udcbf',
  寧: '\ud83c\udfa7',
  良: '\ud83c\udfa4',
  '\uf782': '\ud83d\udd0a',
  '\uf78c': '\ud83d\udce1',
  '\uf768': '\ud83d\udcfb',
  賂: '\ud83d\udcf7',
  寮: '\ud83d\udc84',
  掠: '\ud83d\udc8e',
  若: '\ud83d\udc8d',
  ﭼ: '\ud83c\udf02',
  '\uf75e': '\ud83d\udcbc',
  遼: '\ud83d\udc5c',
  隸: '\ud83d\udc52',
  ﮣ: '\ud83c\udfa9',
  領: '\ud83c\udf80',
  僚: '\ud83d\udc62',
  了: '\ud83d\udc61',
  '\uf77e': '\ud83d\udc60',
  磊: '\ud83d\udc5f',
  廉: '\ud83d\udc54',
  蓼: '\ud83d\udc59',
  療: '\ud83d\udc58',
  惡: '\ud83d\udc57',
  牢: '\ud83d\udc55',
  '\uf775': '\ud83d\udea4',
  綾: '\ud83c\udfc4',
  ﭭ: '\ud83c\udfca',
  ﭬ: '\ud83c\udfb1',
  ﭫ: '\ud83c\udfc8',
  肋: '\ud83c\udfbf',
  凜: '\u26f3',
  ﭪ: '\ud83c\udfc0',
  凌: '\ud83c\udfbe',
  稜: '\u26be',
  菱: '\u26bd',
  葉: '\ud83d\udd5a',
  省: '\ud83d\udd59',
  塞: '\ud83d\udd58',
  參: '\ud83d\udd57',
  索: '\ud83d\udd56',
  數: '\ud83d\udd55',
  泌: '\ud83d\udd54',
  不: '\ud83d\udd53',
  復: '\ud83d\udd52',
  便: '\ud83d\udd51',
  磻: '\ud83d\udd50',
  說: '\ud83d\udd5b',
  '\uf781': '\ud83d\udebd',
  '\uf77b': '\ud83d\udc89',
  羚: '\ud83d\udc8a',
  瑩: '\ud83d\udeac',
  '\uf75f': '\ud83d\udcba',
  屢: '\ud83d\udce0',
  雷: '\u260e',
  壘: '\ud83d\udcf1',
  '\uf744': '\ud83d\udcf2',
  '\uf743': '\ud83d\udce9',
  樓: '\ud83d\udcbb',
  '\uf76a': '\ud83d\udcfa',
  靈: '\u2702',
  說: '\ud83d\udcdd',
  '\uf789': '\ud83d\udcd6',
  '\uf76f': '\ud83d\udcb0',
  '\uf786': '\ud83d\udd13',
  '\uf785': '\ud83d\udd12',
  呂: '\ud83d\udd11',
  '\ufbb4': '\ud83c\uddf0\ud83c\uddf7',
  '\ufbb3': '\ud83c\udde8\ud83c\uddf3',
  '\ufbb2': '\ud83c\uddf7\ud83c\uddfa',
  ﮱ: '\ud83c\uddea\ud83c\uddf8',
  ﮰ: '\ud83c\uddec\ud83c\udde7',
  ﮯ: '\ud83c\uddee\ud83c\uddf9',
  ﮮ: '\ud83c\udde9\ud83c\uddea',
  ﮭ: '\ud83c\uddeb\ud83c\uddf7',
  ﮬ: '\ud83c\uddfa\ud83c\uddf8',
  ﮫ: '\ud83c\uddef\ud83c\uddf5',
  '\uf77a': '\ud83d\udebc',
  '\uf779': '\ud83d\udeba',
  '\uf778': '\ud83d\udeb9',
  ﮧ: '\ud83c\udfa6',
  '\uf7aa': '\u267f',
  囹: '\ud83d\udebe',
  '\uf792': '\ud83d\udebb',
  '\uf790': '\ud83c\udd7f',
  '\uf7a9': '\ud83d\udd30',
  '\uf777': '\ud83d\udea7',
  '\uf7f2': '\u26a0',
  '\uf78f': '\ud83d\udea5',
  '\uf791': '\ud83d\ude8f',
  梁: '\u26fd',
  '\uf763': '\u2668',
  '\uf762': '\u26fa',
  '\uf761': '\u26f2',
  ﭳ: '\ud83c\udfa2',
  '\uf764': '\ud83c\udfa1',
  ﮨ: '\ud83c\udfed',
  ﮪ: '\u0000',
  // PUA encoding 0xe50a, no unified version
  // see [1](http://www.unicode.org/~scherer/emoji4unicode/snapshot/full.html#e-4C5)
  ﮩ: '\ud83d\uddfc',
  ﮦ: '\ud83c\udff0',
  ﮥ: '\ud83c\udfef',
  亮: '\u26ea',
  ﭽ: '\ud83d\udc92',
  ﮤ: '\ud83c\udfec',
  ﮡ: '\ud83c\udfe9',
  '\uf799': '\ud83c\udfe8',
  '\uf798': '\ud83c\udfeb',
  '\uf797': '\ud83c\udfea',
  '\uf796': '\ud83c\udfe5',
  ﮋ: '\ud83c\udf07',
  ﮊ: '\ud83c\udf05',
  年: '\ud83c\udf04',
  ﭩ: '\ud83d\udc6f',
  '\ufbbf': '\ud83d\udc83',
  '\uf76d': '\ud83c\udc04',
  '\uf772': '\ud83c\udfc1',
  醴: '\ud83d\udce3',
  '\uf783': '\ud83d\udce2',
  鈴: '\ud83d\udca3',
  '\uf75d': '\ud83d\udd25',
  '\uf756': '\ud83d\udd28',
  '\uf753': '\ud83d\udd2b',
  聆: '\ud83c\udf88',
  '\uf74f': '\ud83d\udca1',
  '\uf754': '\ud83d\udd0d',
  暈: '\ud83d\udd14',
  '\uf770': '\ud83c\udfaf',
  '\uf74e': '\ud83d\udc51',
  '\uf771': '\ud83c\udfc6',
  零: '\ud83c\udf89',
  匿: '\ud83c\udf82',
  '\uf752': '\ud83c\udf81',
  '\uf759': '\ud83c\udf42',
  ﮅ: '\ud83c\udf3e',
  ﮈ: '\ud83c\udf43',
  令: '\ud83c\udf35',
  獵: '\ud83c\udf34',
  簾: '\ud83d\udc90',
  殮: '\ud83c\udf3b',
  念: '\ud83c\udf3a',
  沈: '\ud83c\udf39',
  '\uf750': '\ud83c\udf40',
  '\uf758': '\ud83c\udf41',
  捻: '\ud83c\udf37',
  殺: '\ud83c\udf38',
  糧: '\ud83d\uddfb',
  ﮍ: '\ud83c\udf08',
  ﭾ: '\ud83c\udf0a',
  ﮄ: '\ud83c\udf00',
  '\uf77d': '\u26a1',
  轢: '\ud83c\udf19',
  黎: '\u26c4',
  力: '\u2601',
  歷: '\u2614',
  曆: '\u2600',
  ﭨ: '\ud83d\udc6b',
  ﭥ: '\ud83d\udc91',
  '\uf751': '\ud83d\udc8f',
  倫: '\ud83d\udca2',
  '\uf77c': '\ud83d\udca4',
  六: '\ud83d\udca6',
  類: '\ud83d\udca8',
  '\uf755': '\ud83c\udfc3',
  '\uf7a1': '\ud83d\udeb6',
  ﯖ: '\ud83d\udc63',
  ﭦ: '\ud83d\ude47',
  ﭣ: '\ud83d\ude45',
  ﭤ: '\ud83d\ude46',
  ﭢ: '\ud83d\udc50',
  ﭧ: '\ud83d\ude4c',
  ﭚ: '\ud83d\udc43',
  ﭛ: '\ud83d\udc42',
  ﭙ: '\ud83d\udc40',
  רּ: '\ud83d\ude2a',
  בֿ: '\ud83d\ude37',
  ﭖ: '\ud83d\ude21',
  連: '\ud83d\ude20',
  '\uf747': '\ud83d\ude31',
  ﭐ: '\ud83d\ude32',
  ﭒ: '\ud83d\ude02',
  ﭑ: '\ud83d\ude2d',
  ﭓ: '\ud83d\ude22',
  צּ: '\ud83d\ude23',
  וֹ: '\ud83d\ude28',
  ﭏ: '\ud83d\ude30',
  סּ: '\ud83d\ude25',
  קּ: '\ud83d\ude16',
  蓮: '\ud83d\ude1e',
  ףּ: '\ud83d\ude14',
  ﭗ: '\ud83d\ude1a',
  ﭘ: '\ud83d\ude18',
  '\uf746': '\ud83d\ude0d',
  '\ufb45': '\ud83d\ude09',
  ﭔ: '\u263a',
  輦: '\ud83d\ude03',
  聯: '\ud83d\ude0a',
  ﭕ: '\ud83d\ude04',
  כֿ: '\ud83d\ude33',
  תּ: '\ud83d\ude0c',
  פּ: '\ud83d\ude01',
  '\uf745': '\ud83d\ude1c',
  שּ: '\ud83d\ude1d',
  פֿ: '\ud83d\ude12',
  '\ufb42': '\ud83d\ude0f',
  '\uf748': '\ud83d\ude13',
  異: '\u2764',
  北: '\ud83d\udc94',
  劉: '\ud83d\udc93',
  杻: '\ud83d\udc97',
  柳: '\ud83d\udc98',
  流: '\ud83d\udc99',
  溜: '\ud83d\udc9a',
  琉: '\ud83d\udc9b',
  留: '\ud83d\udc9c',
  率: '\u2757',
  輪: '\u2755',
  怒: '\u2753',
  淪: '\u2754',
  量: '\ud83c\udfb5',
  阮: '\ud83c\udfb6',
  硫: '\u2728',
  紐: '\u2b50',
  崙: '\ud83c\udf1f',
  縷: '\u270a',
  陋: '\u270c',
  勒: '\u270b',
  漏: '\ud83d\udc4d',
  淚: '\ud83d\udc4a',
  累: '\u261d',
  ﭠ: '\ud83d\udc4c',
  ﭡ: '\ud83d\udc4e',
  ﭝ: '\ud83d\ude4f',
  ﭞ: '\ud83d\udc4b',
  ﭟ: '\ud83d\udc4f',
  '\uf78d': '\ud83d\udcaa',
  弄: '\ud83d\udc8b',
  ﭜ: '\ud83d\udc44',
  '\uf787': '\ud83c\udf06',
  ﮌ: '\ud83c\udf03',
  ﭶ: '\ud83c\udf8d',
  ﭷ: '\ud83d\udc9d',
  ﭸ: '\ud83c\udf8e',
  ﭹ: '\ud83c\udf93',
  ﭺ: '\ud83c\udf92',
  ﭻ: '\ud83c\udf8f',
  '\uf757': '\ud83c\udf86',
  ﮁ: '\ud83c\udf87',
  ﮃ: '\ud83c\udf90',
  ﮇ: '\ud83c\udf91',
  ﮆ: '\ud83c\udf83',
  ﮉ: '\ud83c\udf85',
  拾: '\ud83c\udf84',
  戀: '\ud83d\udc31',
  煉: '\ud83d\udc36',
  '\uf74b': '\ud83d\udc37',
  璉: '\ud83d\udc2d',
  撚: '\ud83d\udc2f',
  '\uf749': '\ud83d\udc35',
  漣: '\ud83d\udc3b',
  '\ufbcc': '\ud83d\udc30',
  '\ufbcb': '\ud83d\udc2e',
  '\ufbc7': '\ud83d\udc28',
  '\ufbc4': '\ud83d\udc39',
  '\ufbd1': '\ud83d\udc38',
  讀: '\ud83d\udc34',
  '\ufbca': '\ud83d\udc3a',
  '\ufbcf': '\ud83d\udc17',
  '\ufbd0': '\ud83d\udc2b',
  '\ufbc8': '\ud83d\udc12',
  '\uf774': '\ud83d\udc0e',
  '\ufbc6': '\ud83d\udc18',
  '\ufbc9': '\ud83d\udc11',
  '\ufbce': '\ud83d\udc14',
  '\ufbc3': '\ud83d\udc24',
  '\ufbc1': '\ud83d\udc26',
  練: '\ud83d\udc27',
  秊: '\ud83d\udc33',
  '\ufbc0': '\ud83d\udc2c',
  陵: '\ud83d\udc1f',
  '\ufbc2': '\ud83d\udc20',
  '\uf74a': '\ud83d\udc19',
  '\ufbcd': '\ud83d\udc0d',
  '\ufbc5': '\ud83d\udc1b',
  ﮂ: '\ud83d\udc1a',
  論: '\ud83d\udc66',
  壟: '\ud83d\udc67',
  籠: '\ud83d\udc68',
  聾: '\ud83d\udc69',
  '\ufbb8': '\ud83d\udc74',
  '\ufbb9': '\ud83d\udc75',
  '\ufbba': '\ud83d\udc76',
  '\uf7f3': '\ud83d\udc81',
  '\uf793': '\ud83d\udc6e',
  '\ufbbb': '\ud83d\udc77',
  '\ufbb5': '\ud83d\udc71',
  '\ufbb6': '\ud83d\udc72',
  '\ufbb7': '\ud83d\udc73',
  '\ufbbe': '\ud83d\udc82',
  '\ufbbd': '\ud83d\uddfd',
  '\ufbbc': '\ud83d\udc78',
  憐: '\ud83d\udc7c',
  '\uf75a': '\ud83d\udc7f',
  '\uf75b': '\ud83d\udc7b',
  '\uf75c': '\ud83d\udc80',
  '\uf74c': '\ud83d\udc7d',
  '\uf76b': '\ud83d\udc7e',
  鍊: '\ud83d\udca9',
  濾: '\ud83c\udf74',
  麗: '\ud83c\udf7a',
  怜: '\ud83c\udf7b',
  礪: '\ud83c\udf78',
  嶺: '\ud83c\udf76',
  律: '\ud83c\udf75',
  閭: '\u2615',
  驪: '\ud83c\udf70',
  栗: '\ud83c\udf66',
  隆: '\ud83c\udf61',
  利: '\ud83c\udf58',
  ﮀ: '\ud83c\udf67',
  梨: '\ud83c\udf59',
  吏: '\ud83c\udf5a',
  慄: '\ud83c\udf5e',
  '\uf760': '\ud83c\udf54',
  李: '\ud83c\udf5b',
  履: '\ud83c\udf5d',
  易: '\ud83c\udf5c',
  理: '\ud83c\udf63',
  溺: '\ud83c\udf71',
  吝: '\ud83c\udf72',
  泥: '\ud83c\udf62',
  率: '\ud83c\udf5f',
  '\uf788': '\ud83c\udf73',
  痢: '\ud83c\udf4e',
  裏: '\ud83c\udf53',
  罹: '\ud83c\udf4a',
  裡: '\ud83c\udf49',
  里: '\ud83c\udf45',
  離: '\ud83c\udf46',
  '\uf784': '\ud83c\udf8c',
  '\uf776': '\ud83d\udeb2',
  拏: '\ud83d\ude97',
  ﭮ: '\ud83d\ude99',
  '\uf79a': '\ud83d\ude8c',
  ﭯ: '\ud83d\ude9a',
  ﭲ: '\ud83d\ude93',
  ﭱ: '\ud83d\ude91',
  ﭰ: '\ud83d\ude92',
  '\uf79b': '\ud83d\ude95',
  丹: '\ud83d\ude83',
  ﭴ: '\ud83d\ude87',
  凉: '\ud83d\ude89',
  寧: '\ud83d\ude85',
  ﭵ: '\ud83d\ude84',
  '\uf7a2': '\ud83d\udea2',
  樂: '\u26f5',
  諾: '\u2708',
  '\uf74d': '\ud83d\ude80',
  '\uf7a8': '\ud83d\udead',
  略: '\ud83c\udfe0',
  兩: '\ud83c\udfe2',
  '\uf741': '\ud83d\udceb',
  '\uf742': '\ud83d\udcee',
  '\uf794': '\ud83c\udfe3',
  '\uf78e': '\ud83c\udfe6',
  '\uf795': '\ud83c\udfe7'
}

let EMOJI_JIS_RE = null

function createRegexp (map) {
  const keys = Object.keys(map)
  keys.sort(function (a, b) {
    return b.length - a.length
  })
  return new RegExp('(' + keys.join('|') + ')', 'g')
}

function jisToUnified (text) {
  if (!EMOJI_JIS_RE) {
    EMOJI_JIS_RE = createRegexp(JIS_MAP)
  }
  return text.replace(EMOJI_JIS_RE, function (_, m) {
    return JIS_MAP[m]
  })
}

export default {
  jisToUnified
}
